---
interface Props {
    size: "small" | "medium" | "large";
    imgSrc: string;
    altText?: string;
}

import PreviewMsg from "./PreviewMsg.astro";

const { size, imgSrc, altText } = Astro.props;

// Función para generar descripción alt basada en el nombre del archivo
const generateAltText = (filename: string): string => {
    const baseName = filename.replace('.webp', '').replace(/[-_]/g, ' ');
    return `Render 3D de ${baseName} - Trabajo de modelado tridimensional`;
};

const finalAltText = altText || generateAltText(imgSrc);
---

<a
    href={`/renders/${imgSrc}`}
    data-pswp-width="1200"
    data-pswp-height="675"
    data-cropped="true"
    target="_blank"
    rel="noopener noreferrer"
    class:list={[
        "rounded-xl shadow-custom overflow-hidden group cursor-pointer w-full relative",
        size === "small" && "h-auto md:h-[161px] lg:h-[281px]",
        size === "medium" && "h-[217px] lg:h-[380px]",
        size === "large" && "h-auto md:h-[330px] lg:h-[578px]",
    ]}
    aria-label={`Ver ${finalAltText} en tamaño completo (abre en nueva ventana)`}
    role="button"
    tabindex="0"
>
    <img
        src={`/renders/${imgSrc}`}
        class="rounded-xl w-full h-full object-cover group-hover:scale-105 group-hover:-rotate-1 transition-transform duration-300"
        alt={finalAltText}
        loading="lazy"
        role="img"
        aria-describedby="preview-msg"
    />

    <PreviewMsg />
</a>
